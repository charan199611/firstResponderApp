<!DOCTYPE html>
<html lang="en" dir="rtl" >

<head>
  <meta charset="utf-8" />
 
  <title>
   FIRST RESPONDER APP

  </title>
  <!-- <meta name="title" lang="en">Learning <span lang="de">Deutsch</span></meta> -->

  <base href="/" />

  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />

  <link rel="icon" type="image/png" href="assets/icon/favicon.png" />

  <!-- add to homescreen for ios -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />

  <script>window.$ = window.jQuery = require('jquery');</script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Map configration -->
  <!-- <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link
    href="http://192.168.1.165:8989/GISCesiumAPIService/Cesium-1.51/Build/Cesium/Widgets/widgets.css"
    rel="stylesheet" />
  <link
    href="http://192.168.1.165:8989/GISCesiumAPIService/Cesium-1.51/Build/Cesium/DrawHelper.css"
    rel="stylesheet" />
  <link href="http://192.168.1.165:8989/GISClientServices/v3.1.1/trinity.css" rel="stylesheet" />
  <link href="http://192.168.1.165:8989/GISClientServices/v3.1.1/ol3gm.css" rel="stylesheet" />
  <link href="http://192.168.1.165:8989/GISClientServices/v3.1.1/easy-autocomplete.css"
    rel="stylesheet" />

  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9SJVPF52MI55REEUjV0X6xcS9wee8p9o&libraries=places"></script>

  <script src="http://192.168.1.165:8989/GISCesiumAPIService/Cesium-1.51/Build/Cesium/Cesium.js">
  </script>
  <script
    src="http://192.168.1.165:8989/GISCesiumAPIService/Cesium-1.51/Build/Cesium/DrawHelper.js">
    </script>
  <script src="http://192.168.1.165:8989/GISClientServices/v3.1.1/turf.min.js" charset="utf-8"></script>


  <script src="http://192.168.1.165:8989/GISClientServices/v3.1.1/trinity.ol.js"></script>
  <script src="http://192.168.1.165:8989/GISClientServices/v3.1.1/ol3gm.js"></script>
  <script src="http://192.168.1.165:8989/GISClientServices/v3.1.1/appconfig.js"></script>
  <script src="http://192.168.1.165:8989/GISClientServices/v3.1.1/trinityapi.js"></script>
  <script src="http://192.168.1.165:8989/GISClientServices/v3.1.1/ol3-contextmenu.js"></script>
  <script src="http://192.168.1.165:8989/GISClientServices/v3.1.1/easy-autocomplete.js"></script> -->



  <!-- <link
  href="http://192.168.1.165:8989/trinityCesiumAPI/Cesium-1.51/Build/Cesium/Widgets/widgets.css"
  rel="stylesheet" />
<link
  href="http://192.168.1.165:8989/trinityCesiumAPI/Cesium-1.51/Build/Cesium/DrawHelper.css"
  rel="stylesheet" />
<link href="http://192.168.1.165:8989/trinityAPI/v3.1.1/trinity.css" rel="stylesheet" />
<link href="http://192.168.1.165:8989/trinityAPI/v3.1.1/ol3gm.css" rel="stylesheet" />
<link href="http://192.168.1.165:8989/trinityAPI/v3.1.1/easy-autocomplete.css"
  rel="stylesheet" />

<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9SJVPF52MI55REEUjV0X6xcS9wee8p9o&libraries=places"></script>


<script src="http://192.168.1.165:8989/trinityCesiumAPI/Cesium-1.51/Build/Cesium/Cesium.js">
</script>
<script
  src="http://192.168.1.165:8989/trinityCesiumAPI/Cesium-1.51/Build/Cesium/DrawHelper.js">
  </script>
<script src="http://192.168.1.165:8989/trinityAPI/v3.1.1/turf.min.js" charset="utf-8"></script>


<script src="http://192.168.1.165:8989/trinityAPI/v3.1.1/trinity.ol.js"></script>
<script src="http://192.168.1.165:8989/trinityAPI/v3.1.1/ol3gm.js"></script>
<script src="http://192.168.1.165:8989/trinityAPI/v3.1.1/appconfig.js"></script>
<script src="http://192.168.1.165:8989/trinityAPI/v3.1.1/trinityapi.js"></script>
<script src="http://192.168.1.165:8989/trinityAPI/v3.1.1/ol3-contextmenu.js"></script>
<script src="http://192.168.1.165:8989/trinityAPI/v3.1.1/easy-autocomplete.js"></script> -->
<!-- cairo Environment -->
<link
href="http://10.100.0.8:8092/GISCesiumAPIService/Cesium-1.51/Build/Cesium/Widgets/widgets.css"
rel="stylesheet" />
<link
href="http://10.100.0.8:8092/GISCesiumAPIService/Cesium-1.51/Build/Cesium/DrawHelper.css"
rel="stylesheet" />
<link href="http://10.100.0.8:8092/GISClientServices/v3.1.1/trinity.css" rel="stylesheet" />
<link href="http://10.100.0.8:8092/GISClientServices/v3.1.1/ol3gm.css" rel="stylesheet" />
<link href="http://10.100.0.8:8092/GISClientServices/v3.1.1/easy-autocomplete.css"
rel="stylesheet" />


<script
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9SJVPF52MI55REEUjV0X6xcS9wee8p9o&libraries=places"></script>

<script src="http://10.100.0.8:8092/GISCesiumAPIService/Cesium-1.51/Build/Cesium/Cesium.js">
</script>
<script
src="http://10.100.0.8:8092/GISCesiumAPIService/Cesium-1.51/Build/Cesium/DrawHelper.js">
</script>
<script src="http://10.100.0.8:8092/GISClientServices/v3.1.1/turf.min.js" charset="utf-8"></script>


<script src="http://10.100.0.8:8092/GISClientServices/v3.1.1/trinity.ol.js"></script>
<script src="http://10.100.0.8:8092/GISClientServices/v3.1.1/ol3gm.js"></script>
<script src="http://10.100.0.8:8092/GISClientServices/v3.1.1/appconfig.js"></script>
<script src="http://10.100.0.8:8092/GISClientServices/v3.1.1/trinityapi.js"></script>
<script src="http://10.100.0.8:8092/GISClientServices/v3.1.1/ol3-contextmenu.js"></script>
<script src="http://10.100.0.8:8092/GISClientServices/v3.1.1/easy-autocomplete.js"></script>
  <!-- Map Configration -->

  <script src="assets/tooltip.js"></script>
  
</head>

<style>

body {
      box-sizing: border-box;
      margin: 0;
      padding: 20px;
      font-family: sans-serif;
      background-color: #eaeaea;
      text-align: center;
    }
      #notification {
  z-index: 1000;      
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 200px;
  padding: 20px;
  border-radius: 5px;
  background-color: white;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
}
.hidden {
  display: none;
}
   
</style>
<div id="notification" class="hidden">
  <p id="message"></p>
  <button id="close-button" onClick="closeNotification()">
    Close
  </button>
  <button id="restart-button" onClick="restartApp()" class="hidden">
    Restart
  </button>
</div>
<body>
  <script>
    const electron = require('electron');
    const { ipcRenderer } = require('electron');
    const path = require('path');
    const ipc = require('electron').ipcMain
    const lame = require('lamejs')
   
   const storage = require('electron-store');


   const notification = document.getElementById('notification');
    const message = document.getElementById('message');
    const restartButton = document.getElementById('restart-button');
   

    ipcRenderer.send('app_version');
    ipcRenderer.on('app_version', (event, arg) => {
      ipcRenderer.removeAllListeners('app_version');
      console.log("app_version"+arg.version);
    });


   
    ipcRenderer.on('update_available', () => {
      ipcRenderer.removeAllListeners('update_available');
      console.log("update available");
      message.innerText = 'A new update is available. Downloading now...';
      notification.classList.remove('hidden');
});
ipcRenderer.on('update_downloaded', () => {
  console.log("update_downloaded");
  // ipcRenderer.send('restart_app');
  ipcRenderer.removeAllListeners('update_downloaded');
 message.innerText = 'Update Downloaded. It will be installed on restart. Restart now?';
  restartButton.classList.remove('hidden');
  notification.classList.remove('hidden');
});

ipcRenderer.on('update_progress', (event, arg) => {
  console.log("Download progress...", arg);
  // ipcRenderer.send('restart_app');
 // ipcRenderer.removeAllListeners('update_progress');
  message.innerText = "Downloading: " +arg.progress;
  notification.classList.remove('hidden');
   restartButton.classList.add('hidden');
  // notification.classList.remove('hidden');
});

function closeNotification() {
  notification.classList.add('hidden');
}
function restartApp() {
  ipcRenderer.send('restart_app');
}


    //const Service = require('node-windows').Service;
  </script>
  <app-root></app-root>
</body>

</html>
